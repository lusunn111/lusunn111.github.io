---
title: 'WSL常用命令'
date: 2025-07-09
permalink: /posts/2025/07/wsl常用命令/
tags:
  - 发行版
  - WSL
  - wsl
  - 运维
---

# WSL常用命令

当然可以，以下是最实用、最常用的 **WSL（Windows Subsystem for Linux）命令大全**，按用途分类整理，适合日常开发使用。

## 🖥️ 一、WSL 系统管理命令

| 命令                         | 功能说明                           |
| ---------------------------- | ---------------------------------- |
| `wsl`                        | 启动默认的 WSL 发行版              |
| `wsl -l` 或 `wsl --list`     | 查看已安装的 Linux 发行版          |
| `wsl -l -v`                  | 查看发行版和 WSL 版本（1/2）       |
| `wsl --set-default <发行版>` | 设置默认启动的 WSL 发行版          |
| `wsl -d <发行版>`            | 启动指定的发行版                   |
| `wsl --install`              | 安装 WSL（自动安装 Ubuntu 和依赖） |
| `wsl --shutdown`             | 关闭所有运行中的 WSL 实例          |
| `wsl --terminate <发行版>`   | 强制关闭指定的 WSL 实例            |
| `wsl --unregister <发行版>`  | 删除发行版（⚠️会清空数据）          |

## 💾 二、WSL 文件管理（与 Windows 互通）

| 命令                 | 功能说明                                       |
| -------------------- | ---------------------------------------------- |
| `cd /mnt/c`          | 访问 Windows 的 C 盘（Linux 路径）             |
| `cd /mnt/d/Projects` | 访问 D 盘中的 Projects 文件夹                  |
| `explorer.exe .`     | 在当前 WSL 目录打开 Windows 资源管理器         |
| `notepad.exe <文件>` | 用记事本打开某个文件                           |
| `code .`             | 使用 VS Code 打开当前目录（需要安装 WSL 插件） |

## 🧰 三、WSL 发行版管理（安装、导入、导出）

| 命令                                        | 功能说明                        |
| ------------------------------------------- | ------------------------------- |
| `wsl --export <发行版> <文件名.tar>`        | 导出整个 Linux 系统为压缩包     |
| `wsl --import <新名字> <路径> <文件名.tar>` | 导入 WSL 系统（比如迁移、备份） |
| `wsl --set-version <发行版> 2`              | 设置某个发行版使用 WSL2         |

## 🐧 四、常用 Linux 命令（在 WSL 中执行）

| 命令                                   | 功能说明                     |
| -------------------------------------- | ---------------------------- |
| `sudo apt update && sudo apt upgrade`  | 更新系统                     |
| `sudo apt install git nodejs npm`      | 安装软件                     |
| `conda activate <env>` / `npm install` | 使用 Node/Conda 工具         |
| `top` 或 `htop`                        | 查看当前进程和资源使用情况   |
| `df -h`                                | 查看磁盘使用情况             |
| `du -sh *`                             | 查看当前目录下每个文件夹大小 |

## 🧪 五、进阶技巧（开发者必备）

| 命令                                      | 功能说明                         |
| ----------------------------------------- | -------------------------------- |
| `alias ll='ls -lah --color=auto'`         | 自定义快捷命令（放到 `.bashrc`） |
| `export http_proxy=http://127.0.0.1:7890` | 设置代理（适合 npm/pip）         |
| `code .`                                  | 在当前目录用 VS Code 打开并开发  |
| `nvm install --lts`                       | 用 nvm 安装最新版 Node.js        |
| `conda create -n dev python=3.11`         | 创建 Python 虚拟环境             |

## 📦 六、WSL 安装建议软件清单（命令）

```bash
sudo apt install -y git curl wget build-essential unzip
```

可选：

```bash
sudo apt install -y zsh htop tree net-tools
```

太好了！你提到的“导出镜像”属于 **WSL 的系统备份、迁移和恢复操作**，非常实用，尤其适用于：

- 换电脑/系统
- 备份整个 WSL 环境
- 在不同机器之间复制环境

## 📦 七、WSL 镜像导出与导入（系统备份与迁移）

### ✅ 1. 查看当前已安装的发行版

```powershell
wsl -l -v
```

示例输出：

```
  NAME                   STATE           VERSION
* Ubuntu-22.04           Running         2
  Debian                 Stopped         2
```

### ✅ 2. 导出某个发行版为 `.tar` 镜像

```powershell
wsl --export Ubuntu-22.04 D:\Backup\ubuntu2204.tar
```

📌 说明：

- `Ubuntu-22.04` 是你当前的 WSL 发行版名称
- `D:\Backup\ubuntu2204.tar` 是你要导出的文件路径和名称（可自定义）

> ✅ **导出的镜像包含你所有的环境、文件、配置、conda/npm 等内容！**

### ✅ 3. 导入镜像到新的发行版（恢复或迁移）

你可以用 `.tar` 文件在其他路径或设备上恢复系统：

```powershell
wsl --import Ubuntu-Copy D:\WSL\UbuntuCopy D:\Backup\ubuntu2204.tar
```

📌 参数说明：

- `Ubuntu-Copy` 是新发行版的名字（你可以随便命名）
- 第二个路径是导入的安装目录
- 第三个是 `.tar` 镜像文件的路径

### ✅ 4. 删除旧发行版（⚠️ 清空数据）

**谨慎使用！导入后如果你不再需要原来的系统：**

```powershell
wsl --unregister Ubuntu-22.04
```

### ✅ 5. 修改默认启动的发行版（指定你导入的新系统）

```powershell
wsl --set-default Ubuntu-Copy
```

## 🧰 附加功能：压缩虚拟硬盘空间（优化磁盘）

导出并重新导入是最有效的“瘦身”方式，因为：

- WSL 的 `ext4.vhdx` 文件不会自动缩小
- 导出 → 删除 → 重新导入 可以大幅释放磁盘空间

## ✅ 快速总结：WSL 镜像操作命令表

| 命令                                      | 作用                  |
| ----------------------------------------- | --------------------- |
| `wsl --export <发行版> <路径.tar>`        | 备份当前系统          |
| `wsl --import <新名称> <路径> <路径.tar>` | 还原/迁移到新目录     |
| `wsl --unregister <旧发行版>`             | 删除系统（⚠️清空数据） |
| `wsl --set-default <发行版>`              | 设置默认启动发行版    |

